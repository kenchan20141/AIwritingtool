<!DOCTYPE html>
<html>
<head>
    <title>AI寫作助手</title>
    <style>
        /* 简单的基础样式 */
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        .box {
            border: 1px solid #ccc;
            padding: 20px;
            margin: 10px 0;
        }
        button {
            background: #007bff;
            color: white;
            padding: 10px;
            border: none;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <h1>AI寫作助手</h1>

    <!-- 生成题目区域 -->
    <div class="box">
        <button onclick="generateTopic()">生成寫作题目</button>
        <div id="topicResult"></div>
    </div>

    <!-- 写作区域 -->
    <div class="box">
        <textarea id="writingContent" rows="10" style="width: 100%"></textarea>
        <button onclick="submitWriting()">提交作文</button>
        <div id="commentResult"></div>
    </div>

    <script>
        // 你的API配置信息
        const API_KEY = "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";
        const API_URL = "https://openrouter.ai/api/v1/chat/completions";
        const MODEL = "deepseek/deepseek-r1:free";

        // 生成写作题目
        async function generateTopic() {
            const prompt = "請生成一個適合中學生作片段的題目，要求：1.贴近生活 3.10字以内";
            
            try {
                const response = await fetch(API_URL, {
                    method: "POST",
                    headers: {
                        "Authorization": `Bearer ${API_KEY}`,
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify({
                        model: MODEL,
                        messages: [{ role: "user", content: prompt }]
                    })
                });

                const data = await response.json();
                document.getElementById("topicResult").innerHTML = 
                    "今日题目：<strong>" + data.choices[0].message.content + "</strong>";
            } catch (error) {
                alert("生成题目时出错，请重试");
            }
        }

        // 提交作文获取点评
        async function submitWriting() {
            const content = document.getElementById("writingContent").value;
            if (!content) {
                alert("请先输入写作内容");
                return;
            }

            const prompt = `请根据以下内容进行点评（要求：1.指出优点 2.提出改进建议 3.简明扼要）：\n${content}`;
            
            try {
                const response = await fetch(API_URL, {
                    method: "POST",
                    headers: {
                        "Authorization": `Bearer ${API_KEY}`,
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify({
                        model: MODEL,
                        messages: [{ role: "user", content: prompt }]
                    })
                });

                const data = await response.json();
                document.getElementById("commentResult").innerHTML = 
                    "<h3>AI点评：</h3>" + data.choices[0].message.content.replace(/\n/g, "<br>");
            } catch (error) {
                alert("点评生成失败，请重试");
            }
        }
    </script>
</body>
</html>
